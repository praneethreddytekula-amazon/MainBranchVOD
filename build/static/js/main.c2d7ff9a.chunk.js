(this.webpackJsonpunicornflix=this.webpackJsonpunicornflix||[]).push([[0],{314:function(e,t,n){},316:function(e,t,n){},321:function(e,t,n){},322:function(e,t){},345:function(e,t,n){},346:function(e,t,n){},350:function(e,t){},352:function(e,t){},362:function(e,t){},364:function(e,t){},391:function(e,t){},393:function(e,t){},394:function(e,t){},399:function(e,t){},401:function(e,t){},420:function(e,t){},432:function(e,t){},435:function(e,t){},499:function(e,t,n){},500:function(e,t,n){},502:function(e,t,n){"use strict";n.r(t);var a=n(95),o=n.n(a);n(314),n(315),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(0),r=n.n(i),s=n(291),c=n(84),l=(n(316),n(85)),u=n.n(l),d=n(115),p=n(61),m=n(62),h=n(81),f=n(64),v=n(63),b=n(140),g=n(524),y=n(522),O=n(523),E=n(271),k=(n(321),n(294)),A=(n(345),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.player=Object(k.a)(this.videoNode,this.props)}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{ref:function(t){e.videoNode=t},className:"video-js"})))}}]),n}(r.a.Component)),j=(n(346),n.p+"static/media/logo.927f1d60.svg"),w=function(e){var t=e.item,n=t.title,a=t.details;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"container"},r.a.createElement("img",{src:j,alt:"Movie"}),n,r.a.createElement("p",null,a)))};w.defaultProps={item:{title:"Default Title",details:"Default Details"}};var _=w,V=(n(347),n(88)),C=n(87),x=n(266),S="\n  query ListVodAssets(\n    $filter: ModelVodAssetFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listVodAssets(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        title\n        description\n        video {\n          id\n          createdAt\n          updatedAt\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",T="\n  query SearchVodAssets(\n    $filter: SearchableVodAssetFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    searchVodAssets(\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        title\n        description\n      }\n      nextToken\n      total\n    }\n  }\n",N={awsInputVideo:"octankvodservice-dev-input-m7ak3o0x",awsOutputVideo:"octankvodservice-dev-output-m7ak3o0x.s3.us-east-1.amazonaws.com"},I=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).hideMovie=function(){a.setState({displayingMovie:!1})},a.displayMovie=function(e){V.default._config.aws_project_region;a.setState({sources:[{src:"https://".concat(N.awsOutputVideo,"/").concat(e.video.id,"/").concat(e.video.id,".m3u8"),type:"application/x-mpegURL"}],displayingMovie:!0,choosenItem:e})},a.overlayMovie=function(){var e=a.state,t=e.displayingMovie,n=e.sources,o=e.choosenItem,i=o.title,s=o.description;return r.a.createElement(g.a,{id:"popup",style:{maxWidth:755},isOpen:t,toggle:a.hideMovie},r.a.createElement(y.a,{toggle:a.hideMovie},i),r.a.createElement(O.a,null,s,r.a.createElement(A,{controls:!0,sources:n,width:720,height:420,bigPlayButton:!1,autoplay:!0})))},a.listenForNewAssets=function(){C.a.graphql(Object(x.b)("\n  subscription OnCreateVodAsset {\n    onCreateVodAsset {\n      id\n      title\n      description\n      video {\n        id\n        createdAt\n        updatedAt\n      }\n      createdAt\n      updatedAt\n    }\n  }\n")).subscribe({next:function(e){var t=a.state.items;t.push(e.value.data.onCreateVodAsset),a.setState({items:t})}})},a.state={displayingMovie:!1,choosenItem:{},nextToken:"",sources:[],items:[]},a.handleOnDocumentBottom=a.handleOnDocumentBottom.bind(Object(h.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.graphql(Object(x.b)(S));case 2:t=e.sent,void 0===(n=t.data.listVodAssets.nextToken)&&(n=""),this.setState({items:t.data.listVodAssets.items,nextToken:n}),this.listenForNewAssets();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOnDocumentBottom",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,o,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.nextToken,a=t.items,""===n||null===n||void 0===n){e.next=10;break}return console.log(n),e.next=5,C.a.graphql(Object(x.b)(S,{nextToken:n}));case 5:o=e.sent,i=a.concat(o.data.listVodAssets.items),void 0===(r=o.data.listVodAssets.nextToken)&&(r=""),this.setState({items:i,nextToken:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.items.map((function(t){return r.a.createElement(b.a,{xs:6,sm:4,lg:3.5,style:{paddingTop:15,paddingBottom:15},key:t.id},r.a.createElement("button",{type:"button",onClick:function(n){return e.displayMovie(t,n)},"aria-label":t.title},r.a.createElement(_,{item:t})))}));return r.a.createElement("div",{style:{paddingTop:85}},this.overlayMovie(),r.a.createElement(E.a,{onBottom:this.handleOnDocumentBottom}),r.a.createElement(b.b,{fluid:!0},r.a.createElement(b.c,null,t)))}}]),n}(i.Component),P=n(119),M=n(142),$=n(48),D="INITIAL_QUERY",B="ADDITIONAL_QUERY",F=function(e,t){switch(t.type){case D:return t.posts;case B:return[].concat(Object(M.a)(e),Object(M.a)(t.posts));case"SUBSCRIPTION":return[t.post].concat(Object(M.a)(e));default:return e}};function L(){var e=Object(i.useReducer)(F,[]),t=Object(P.a)(e,2),n=(t[0],t[1],Object(i.useState)(null)),a=Object(P.a)(n,2),o=(a[0],a[1],Object(i.useState)(!1)),s=Object(P.a)(o,2),c=(s[0],s[1],Object(i.useState)("")),l=Object(P.a)(c,2),p=l[0],m=l[1],h=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,o,i,r,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,console.log("searchAssets called: "+p),""!==p){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,$.a.graphql(Object(x.b)(T,{filter:{title:{matchPhrase:p}},limit:20,nextToken:n}));case 6:for(a=e.sent,o=document.getElementById("output"),i=document.getElementById("totalLength"),r="",s=0;s<a.data.searchVodAssets.items.length;s++)r=r+a.data.searchVodAssets.items[s].title+"<br></br> ";o.innerHTML=r,i.innerHTML=a.data.searchVodAssets.items.length,console.log(a.data.searchVodAssets.items);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Search for videos","aria-label":"Label","aria-describedby":"basic-addon2",value:p,onChange:function(e){m(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{onClick:function(){h(D)},className:"btn btn-primary",type:"submit"},"Search"))),r.a.createElement("p",null,"Search results found: ",r.a.createElement("a",{id:"totalLength"}," ")," ")," ",r.a.createElement("br",null),r.a.createElement("p",{id:"output"}))}var q=n(138);var U=Object(q.a)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null," Octank Video Channel "),r.a.createElement(L,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(I,null)))}),!0),H=n(289),R=(n(499),n(169)),W=n.n(R),z=(n(500),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={filePicked:""},a}return Object(m.a)(n,[{key:"onChange",value:function(e){var t=e.target.files[0],n=this.props.callbackFromParent;this.setState({filePicked:t.name}),n(t),e.preventDefault()}},{key:"render",value:function(){var e=this,t="Choose a file...";return""!==this.state.filePicked&&(t="Movie file selected"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"FilePicker",className:"fileInput"},t,r.a.createElement("input",{type:"file",name:"file",id:"FilePicker",className:"inputfile",accept:"video/*",onChange:function(t){return e.onChange(t)}})))}}]),n}(i.Component)),G=n(295),J=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).hideProgress=function(){a.setState({showing:!1})},a.progressInfo=function(){var e=a.props.progress,t=r.a.createElement("div",null,"Error!");return e>=100||e<=0?t=r.a.createElement("div",null,"Upload Complete!"):e>0&&(t=r.a.createElement(G.a,{now:e})),t},a.overlayProgress=function(){var e=a.state.showing;return r.a.createElement(g.a,{id:"popup",style:{maxWidth:755},isOpen:e,toggle:a.hideProgress},r.a.createElement(y.a,{toggle:a.hideProgress},"Upload Progress"),r.a.createElement(O.a,null,a.progressInfo()))},a.state={showing:!1},a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,this.overlayProgress())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.progress,a=t;return n>0&&n<100&&(a.showing=!0),a}}]),n}(i.Component),Q=n(114),Y=n(23),K=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).myCallback=function(e){a.setState({file:e,fileName:e.name})},a.state={titleVal:"",descVal:"",groups:[],progress:0},a.submitFormHandler=a.submitFormHandler.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.createAdminPanel=a.createAdminPanel.bind(Object(h.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=V.default._config.aws_project_region;Q.a.currentSession().then((function(t){t.idToken.payload["cognito:groups"]&&e.setState({groups:t.idToken.payload["cognito:groups"]})})),Y.a.configure({AWSS3:{bucket:N.awsInputVideo,region:t,customPrefix:{public:""}}})}},{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.setState(Object(H.a)({},n,t))}},{key:"handledescChange",value:function(e){this.setState({descVal:e.target.value})}},{key:"submitFormHandler",value:function(e){var t=this;e.preventDefault();var n=W()(),a=this,o={input:{id:n}};C.a.graphql(Object(x.b)("\n  mutation CreateVideoObject(\n    $input: CreateVideoObjectInput!\n    $condition: ModelVideoObjectConditionInput\n  ) {\n    createVideoObject(input: $input, condition: $condition) {\n      id\n      createdAt\n      updatedAt\n    }\n  }\n",o)).then((function(e,o){if(void 0===o){var i=t.state,r=i.titleVal,s=i.descVal,c=i.file,l=i.fileName.toLowerCase().split("."),u={input:{title:r,description:s,vodAssetVideoId:n}};C.a.graphql(Object(x.b)("\n  mutation CreateVodAsset(\n    $input: CreateVodAssetInput!\n    $condition: ModelVodAssetConditionInput\n  ) {\n    createVodAsset(input: $input, condition: $condition) {\n      id\n      title\n      description\n      video {\n        id\n        createdAt\n        updatedAt\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",u)),Y.a.put("".concat(n,".").concat(l[l.length-1]),c,{progressCallback:function(e){var t=e.loaded,n=e.total;console.log("Uploaded: ".concat(e.loaded,"/").concat(e.total)),a.setState({progress:t/n*100})},contentType:"video/*"}).then((function(){return console.log("Successfully Uploaded: ".concat(n))})).catch((function(e){return console.log("Error: ".concat(e))}))}}))}},{key:"createAdminPanel",value:function(){var e=this.state,t=e.groups,n=e.titleVal,a=e.descVal,o=e.progress;return t.includes("Admin")?r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",{className:"pageName"},"Admin Panel"),r.a.createElement("form",{onSubmit:this.submitFormHandler},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:n,name:"titleVal",placeholder:"Title",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("textarea",{className:"desTextA",rows:"4",cols:"50",value:a,name:"descVal",placeholder:"Description",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(z,{callbackFromParent:this.myCallback}),r.a.createElement("label",{htmlFor:"submitButton",className:"submitLabel"},"Create Asset",r.a.createElement("input",{type:"submit",className:"submitButton",id:"submitButton",value:"Create Asset"})),r.a.createElement(J,{progress:o}))))):r.a.createElement("div",null,"Not Authenticated")}},{key:"render",value:function(){return r.a.createElement("div",{className:"adminHeader"},this.createAdminPanel())}}]),n}(r.a.Component),Z=Object(q.a)(K,!0),X=r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(c.a,{exact:!0,path:"/",component:U}),r.a.createElement(c.a,{path:"/Admin",component:Z}),r.a.createElement(c.a,{path:"/App",component:U}))),ee={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:224e6113-2a86-4d6a-a1a3-fb534ee56684",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_SVKLLcVsi",aws_user_pools_web_client_id:"7nc82hcq1gu9ke8im75msqmm0d",oauth:{domain:"octankvod9f14ebe3-9f14ebe3-dev.auth.us-east-1.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"https://localhost/",redirectSignOut:"https://localhost/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS",aws_appsync_graphqlEndpoint:"https://z426eokb5ffopgajrno6dkb5ty.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_content_delivery_bucket:"ctank-20210624162718-hostingbucket-dev",aws_content_delivery_bucket_region:"us-east-1",aws_content_delivery_url:"https://dropeiboeeuny.cloudfront.net"};V.default.configure(ee),o.a.render(X,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[502,1,2]]]);
//# sourceMappingURL=main.c2d7ff9a.chunk.js.map